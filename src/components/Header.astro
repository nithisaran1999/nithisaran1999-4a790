---
const navItems = [
    { linkTextEn: 'About', linkTextTh: 'เกี่ยวกับ', href: '#about', icon: '◉' },
    { linkTextEn: 'Skills', linkTextTh: 'ทักษะ', href: '#skills', icon: '⌁' },
    { linkTextEn: 'Experience', linkTextTh: 'ประสบการณ์', href: '#experience', icon: '▦' },
    { linkTextEn: 'Contact', linkTextTh: 'ติดต่อ', href: '#contact', icon: '✉' }
];
---

<nav class="flex flex-wrap items-center justify-between gap-4 pt-3 pb-4 sm:pt-5 sm:pb-6">
    <a href="/" class="inline-flex items-center gap-2 font-mono text-sm sm:text-base tracking-wide text-blue-100 no-underline">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" class="text-blue-300">
            <rect x="3" y="4" width="18" height="16" rx="2"></rect>
            <path d="m7 9 3 3-3 3"></path>
            <path d="M13 15h4"></path>
        </svg>
        <span><span class="text-blue-400">root</span>@portfolio:~$</span>
    </a>
    {
        <div class="flex flex-wrap items-center gap-3">
            {!!navItems?.length && (
                <ul class="flex flex-wrap gap-x-4 gap-y-1">
                    {navItems.map((item) => (
                        <li>
                            <a href={item.href} class="inline-flex items-center gap-1.5 px-2 py-1 text-sm font-medium text-blue-100 no-underline border border-transparent rounded hover:border-blue-600/70 hover:bg-blue-950/30">
                                <span class="text-blue-300" aria-hidden="true">{item.icon}</span>
                                <span class="lang-en">{item.linkTextEn}</span>
                                <span class="lang-th">{item.linkTextTh}</span>
                            </a>
                        </li>
                    ))}
                </ul>
            )}

            <div class="lang-switcher" role="group" aria-label="Language switcher">
                <button class="lang-switch-btn" type="button" data-set-lang="en">EN</button>
                <button class="lang-switch-btn" type="button" data-set-lang="th">TH</button>
            </div>
        </div>
    }
</nav>

<script is:inline>
    (() => {
        const docEl = document.documentElement;

        const applyLang = (lang) => {
            const next = lang === 'th' ? 'th' : 'en';
            docEl.setAttribute('data-lang', next);
            docEl.setAttribute('lang', next);
            localStorage.setItem('portfolio-lang', next);
        };

        const storedLang = localStorage.getItem('portfolio-lang');
        if (storedLang) {
            applyLang(storedLang);
        }

        document.querySelectorAll('[data-set-lang]').forEach((button) => {
            button.addEventListener('click', () => {
                applyLang(button.getAttribute('data-set-lang') || 'en');
            });
        });
    })();
</script>
