@import 'tailwindcss';

@theme {
    --font-sans: 'Inter Variable', ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
    --color-primary: #3b82f6;
    --color-primary-content: #dbeafe;
    --color-complementary: #050b1a;
    --color-surface: #09142c;
    --color-border: #1e40af;
    --background-image-noise: none;
}

@layer base {
    html,
    body {
        @apply min-h-full;
    }

    html {
        scroll-behavior: smooth;
    }

    html {
        color-scheme: dark;
    }

    html[data-theme='light'] {
        color-scheme: light;
    }

    :where(section, div, article)[id] {
        scroll-margin-top: 1.25rem;
    }

    @media (prefers-reduced-motion: reduce) {
        html {
            scroll-behavior: auto;
        }
    }

    body {
        background: radial-gradient(circle at top right, color-mix(in oklab, var(--color-primary) 26%, transparent), transparent 35%),
            radial-gradient(circle at bottom left, color-mix(in oklab, var(--color-primary) 12%, transparent), transparent 38%), var(--color-complementary);
        color: color-mix(in oklab, white 92%, var(--color-primary) 8%);
    }

    html[data-theme='light'] body {
        background-color: #f8fbff;
        background-image: radial-gradient(circle at 12% 8%, #dbeafe 0%, rgba(219, 234, 254, 0) 42%),
            radial-gradient(circle at 86% 12%, #bfdbfe 0%, rgba(191, 219, 254, 0) 46%),
            linear-gradient(180deg, #f8fbff 0%, #eef4ff 55%, #ffffff 100%);
        color: color-mix(in oklab, var(--color-complementary) 90%, white 10%);
    }

    html[data-theme='light'] .bg-complementary {
        background-color: #f8fbff !important;
    }

    html[data-theme='light'] a:not(.btn) {
        color: color-mix(in oklab, var(--color-primary) 72%, var(--color-complementary) 28%);
    }

    html[data-theme='light'] a:not(.btn):hover {
        color: color-mix(in oklab, var(--color-primary) 82%, var(--color-complementary) 18%);
    }

    h1 {
        @apply text-4xl font-bold tracking-tight sm:text-5xl;
    }

    h2 {
        @apply text-2xl font-bold sm:text-3xl;
    }

    a:not(.btn) {
        @apply transition-colors hover:text-blue-200;
    }

    pre {
        @apply p-6 overflow-x-auto rounded-lg;
    }

    :not(pre) > code {
        @apply px-1 py-0.5 font-mono rounded bg-blue-950/60 text-blue-200;
        font-size: 0.9em;
    }

    html[data-theme='light'] :not(pre) > code {
        background: color-mix(in oklab, var(--color-primary) 12%, white 88%);
        color: color-mix(in oklab, var(--color-primary) 72%, var(--color-complementary) 28%);
    }

    html[data-lang='en'] .lang-th {
        display: none;
    }

    html[data-lang='th'] .lang-en {
        display: none;
    }

    html[data-theme='light'] .text-blue-50,
    html[data-theme='light'] .text-blue-100 {
        color: #0f172a !important;
    }

    html[data-theme='light'] .text-blue-200,
    html[data-theme='light'] .text-blue-300 {
        color: #1d4ed8 !important;
    }

    html[data-theme='light'] .bg-blue-950\/20,
    html[data-theme='light'] .bg-blue-950\/25,
    html[data-theme='light'] .bg-blue-950\/30,
    html[data-theme='light'] .bg-blue-950\/35,
    html[data-theme='light'] .bg-blue-950\/45,
    html[data-theme='light'] .bg-blue-950\/50,
    html[data-theme='light'] .bg-blue-950\/80,
    html[data-theme='light'] .bg-blue-950\/90 {
        background-color: color-mix(in oklab, white 90%, var(--color-primary) 10%) !important;
    }

    html[data-theme='light'] .border-blue-700\/70,
    html[data-theme='light'] .border-blue-600\/70,
    html[data-theme='light'] .border-blue-600\/80,
    html[data-theme='light'] .border-blue-300\/70 {
        border-color: color-mix(in oklab, var(--color-primary) 42%, white 58%) !important;
    }

    html[data-theme='light'] #mobileMenuToggle {
        color: color-mix(in oklab, var(--color-primary) 68%, var(--color-complementary) 32%);
        background: color-mix(in oklab, white 90%, var(--color-primary) 10%);
        border-color: color-mix(in oklab, var(--color-primary) 44%, white 56%);
    }

    html[data-theme='light'] nav > a {
        color: color-mix(in oklab, var(--color-primary) 66%, var(--color-complementary) 34%);
    }

    html[data-theme='light'] #mobileMenu {
        color: color-mix(in oklab, var(--color-complementary) 88%, white 12%);
    }

    html[data-theme='light'] #mobileMenu [data-nav-link] {
        color: color-mix(in oklab, var(--color-primary) 64%, var(--color-complementary) 36%);
        border-color: color-mix(in oklab, var(--color-primary) 34%, white 66%);
        background: color-mix(in oklab, white 92%, var(--color-primary) 8%);
    }

    html[data-theme='light'] #mobileMenu [data-nav-link]:hover {
        color: color-mix(in oklab, var(--color-primary) 78%, var(--color-complementary) 22%);
        border-color: color-mix(in oklab, var(--color-primary) 50%, white 50%);
        background: color-mix(in oklab, white 86%, var(--color-primary) 14%);
    }

    @media (min-width: 640px) {
        #mobileMenu {
            padding: 0.25rem;
            background: transparent;
            border-color: transparent;
        }

        html[data-theme='light'] #mobileMenu.bg-blue-950\/25 {
            background-color: transparent !important;
        }

        html[data-theme='dark'] #mobileMenu [data-nav-link],
        html[data-theme='dark'] #mobileMenu [data-nav-link]:hover {
            background: transparent;
            color: color-mix(in oklab, white 92%, var(--color-primary) 8%);
            border-color: color-mix(in oklab, var(--color-border) 62%, transparent);
        }

        html[data-theme='light'] #mobileMenu [data-nav-link],
        html[data-theme='light'] #mobileMenu [data-nav-link]:hover {
            background: transparent;
            border-color: color-mix(in oklab, var(--color-primary) 42%, white 58%);
        }

        html[data-theme='dark'] #mobileMenu [data-nav-link]:hover {
            border-color: color-mix(in oklab, var(--color-primary) 64%, transparent);
        }

        html[data-theme='light'] #mobileMenu [data-nav-link]:hover {
            border-color: color-mix(in oklab, var(--color-primary) 56%, white 44%);
        }
    }

    html[data-theme='light'] footer > div {
        background: color-mix(in oklab, white 92%, var(--color-primary) 8%);
        border-color: color-mix(in oklab, var(--color-primary) 38%, white 62%);
    }

    html[data-theme='light'] .tui-panel {
        color: color-mix(in oklab, var(--color-complementary) 88%, white 12%);
    }

}

@layer components {
    .markdown {
        > * {
            @apply my-6;
        }

        :where(h1, h2) {
            @apply mt-12 mb-6;
        }

        > :first-child {
            @apply mt-0;
        }

        > :last-child {
            @apply mb-0;
        }
    }

    .btn {
        @apply inline-flex items-center justify-center gap-2 cursor-pointer text-center font-semibold no-underline transition-colors border font-mono tracking-wide text-blue-100 bg-blue-950/45 border-blue-600/80;
        padding: var(--btn-py, 0.875rem) var(--btn-px, 1.25rem);
        font-size: var(--btn-font-size, 0.875rem);
        border-radius: var(--btn-border-radius, 0.25rem);
        box-shadow: inset 0 0 0 1px color-mix(in oklab, var(--color-border) 65%, transparent);

        &:hover {
            @apply bg-blue-900/60 text-blue-50 border-blue-500;
        }

        &:disabled {
            @apply text-gray-400 bg-gray-700;
        }
    }

    html[data-theme='light'] .btn {
        color: #1e3a8a;
        background-color: rgba(191, 219, 254, 0.9);
        border-color: rgba(37, 99, 235, 0.6);
    }

    html[data-theme='light'] .btn:hover {
        color: #1e40af;
        background-color: rgba(147, 197, 253, 0.8);
        border-color: rgba(37, 99, 235, 0.75);
    }

    .btn-lg {
        --btn-font-size: 1.125rem;
        --btn-px: 1.5rem;
        --btn-py: 1.125rem;
    }

    .tui-window {
        @apply border rounded-lg overflow-hidden bg-blue-950/20 backdrop-blur-sm;
        border-color: color-mix(in oklab, var(--color-border) 70%, #fff 10%);
        box-shadow: 0 0 0 1px color-mix(in oklab, var(--color-border) 75%, transparent), 0 16px 42px color-mix(in oklab, var(--color-primary) 14%, transparent);
    }

    html[data-theme='light'] .tui-window {
        border-color: color-mix(in oklab, var(--color-border) 60%, white 30%);
        box-shadow: 0 0 0 1px color-mix(in oklab, var(--color-border) 35%, transparent), 0 16px 32px color-mix(in oklab, var(--color-primary) 10%, transparent);
    }

    .tui-titlebar {
        @apply flex items-center justify-between gap-4 px-4 py-2 text-xs tracking-widest uppercase border-b;
        border-color: color-mix(in oklab, var(--color-border) 80%, transparent);
        background: color-mix(in oklab, var(--color-surface) 80%, transparent);
    }

    html[data-theme='light'] .tui-titlebar {
        background: color-mix(in oklab, var(--color-surface) 8%, white 92%);
    }

    .tui-panel {
        @apply p-4 border rounded-md;
        border-color: color-mix(in oklab, var(--color-border) 75%, transparent);
        background: color-mix(in oklab, var(--color-surface) 78%, transparent);
    }

    html[data-theme='light'] .tui-panel {
        border-color: color-mix(in oklab, var(--color-border) 38%, white 40%);
        background: color-mix(in oklab, var(--color-surface) 6%, white 94%);
    }

    .tui-kbd {
        @apply px-2 py-1 text-xs border rounded-sm;
        border-color: color-mix(in oklab, var(--color-border) 70%, transparent);
        background: color-mix(in oklab, var(--color-surface) 90%, transparent);
    }

    html[data-theme='light'] .tui-kbd {
        border-color: color-mix(in oklab, var(--color-primary) 38%, white 62%);
        background: color-mix(in oklab, white 90%, var(--color-primary) 10%);
        color: color-mix(in oklab, var(--color-primary) 70%, var(--color-complementary) 30%);
    }

    .lang-switcher,
    .theme-switcher {
        @apply inline-flex items-center border rounded-md overflow-hidden;
        border-color: color-mix(in oklab, var(--color-border) 72%, transparent);
        background: color-mix(in oklab, var(--color-surface) 82%, transparent);
    }

    .lang-switch-btn,
    .theme-switch-btn {
        @apply px-2 py-1.5 sm:px-2 sm:py-1 text-xs sm:text-sm font-medium transition-colors;
        min-width: 2.6rem;
        color: color-mix(in oklab, white 92%, var(--color-primary) 8%);
    }

    .lang-switch-btn + .lang-switch-btn,
    .theme-switch-btn + .theme-switch-btn {
        border-left: 1px solid color-mix(in oklab, var(--color-border) 62%, transparent);
    }

    .lang-switch-btn:hover,
    .theme-switch-btn:hover {
        background: color-mix(in oklab, var(--color-surface) 70%, transparent);
    }

    html[data-theme='light'] .lang-switcher,
    html[data-theme='light'] .theme-switcher {
        border-color: color-mix(in oklab, var(--color-primary) 42%, white 58%);
        background: color-mix(in oklab, white 90%, var(--color-primary) 10%);
    }

    html[data-theme='light'] .lang-switch-btn,
    html[data-theme='light'] .theme-switch-btn {
        color: color-mix(in oklab, var(--color-primary) 68%, var(--color-complementary) 32%);
    }

    html[data-theme='light'] .lang-switch-btn + .lang-switch-btn,
    html[data-theme='light'] .theme-switch-btn + .theme-switch-btn {
        border-left-color: color-mix(in oklab, var(--color-primary) 42%, white 58%);
    }

    html[data-theme='light'] .lang-switch-btn:hover,
    html[data-theme='light'] .theme-switch-btn:hover {
        background: color-mix(in oklab, white 86%, var(--color-primary) 14%);
    }

    html[data-lang='en'] .lang-switch-btn[data-set-lang='en'],
    html[data-lang='th'] .lang-switch-btn[data-set-lang='th'],
    html[data-theme-pref='dark'] .theme-switch-btn[data-set-theme='dark'],
    html[data-theme-pref='light'] .theme-switch-btn[data-set-theme='light'],
    html[data-theme-pref='system'] .theme-switch-btn[data-set-theme='system'] {
        border-color: color-mix(in oklab, var(--color-primary) 72%, transparent);
        background: color-mix(in oklab, var(--color-primary) 34%, var(--color-surface) 66%);
        color: #eff6ff;
    }

    html[data-theme='light'][data-lang='en'] .lang-switch-btn[data-set-lang='en'],
    html[data-theme='light'][data-lang='th'] .lang-switch-btn[data-set-lang='th'],
    html[data-theme='light'][data-theme-pref='dark'] .theme-switch-btn[data-set-theme='dark'],
    html[data-theme='light'][data-theme-pref='light'] .theme-switch-btn[data-set-theme='light'],
    html[data-theme='light'][data-theme-pref='system'] .theme-switch-btn[data-set-theme='system'] {
        background: color-mix(in oklab, white 74%, var(--color-primary) 26%);
        color: color-mix(in oklab, var(--color-complementary) 94%, white 6%);
    }

    .back-to-top {
        @apply fixed right-5 bottom-5 sm:right-8 sm:bottom-8 w-10 h-10 sm:w-11 sm:h-11 rounded-md border text-blue-100 bg-blue-950/80 font-mono text-lg leading-none;
        border-color: color-mix(in oklab, var(--color-border) 78%, transparent);
        box-shadow: inset 0 0 0 1px color-mix(in oklab, var(--color-border) 70%, transparent), 0 10px 24px color-mix(in oklab, var(--color-primary) 12%, transparent);
        opacity: 0;
        transform: translateY(10px);
        pointer-events: none;
        transition: opacity 180ms ease, transform 180ms ease, background-color 160ms ease, border-color 160ms ease;
        z-index: 40;
    }

    .back-to-top:hover {
        @apply bg-blue-900/85 text-blue-50;
        border-color: color-mix(in oklab, var(--color-primary) 78%, transparent);
    }

    html[data-theme='light'] .back-to-top {
        color: #1e3a8a;
        background: rgba(219, 234, 254, 0.92);
        border-color: rgba(37, 99, 235, 0.55);
    }

    html[data-theme='light'] .back-to-top:hover {
        color: #1e40af;
        background: rgba(147, 197, 253, 0.9);
        border-color: rgba(37, 99, 235, 0.75);
    }

    .back-to-top.is-visible {
        opacity: 1;
        transform: translateY(0);
        pointer-events: auto;
    }

}
